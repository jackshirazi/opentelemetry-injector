name: Test injector

on:
  workflow_dispatch:

env:
  AGENT_TESTS: python nodejs java
  #go dotnet --- both pending

permissions:
  contents: read

jobs:
  build:

    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v4

    - name: Install Zig
      run: |
          ZIG_VERSION=$(cat zig-version | grep -v '^#' | sed 's/ZIG_VERSION=//; s/-r0//')
          echo "Install zig version $ZIG_VERSION"
          curl -L https://ziglang.org/download/$ZIG_VERSION/zig-x86_64-linux-$ZIG_VERSION.tar.xz | tar -xJf -
          export PATH=./zig-x86_64-linux-$ZIG_VERSION:$PATH
          zig version

    - name: Run make zig
      run: make zig-build
